<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Snake Game</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: sans-serif;
        }
        canvas {
            display: block;
            margin: 0 auto;
        }
    </style>
</head>
<body>
<canvas id="game"></canvas>
<script>
    const canvas = document.getElementById('game');
    const ctx = canvas.getContext('2d');

    const cellSize = 20;
    const cols = canvas.width / cellSize;
    const rows = canvas.height / cellSize;

    let snake = [{x: 10, y: 10}];
    let direction = 'right';
    let food = {x: Math.floor(Math.random() * cols), y: Math.floor(Math.random() * rows)};

    function draw() {
        ctx.fillStyle = 'black';
        ctx.fillRect(0, 0, canvas.width, canvas.height);

        ctx.fillStyle = 'lime';
        snake.forEach(function(cell) {
            ctx.fillRect(cell.x * cellSize, cell.y * cellSize, cellSize, cellSize);
        });

        ctx.fillStyle = 'ed';
        ctx.fillRect(food.x * cellSize, food.y * cellSize, cellSize, cellSize);
    }

    function move() {
        let newHead = {x: snake[0].x, y: snake[0].y};

        switch(direction) {
            case 'up':
                newHead.y -= 1;
                break;
            case 'down':
                newHead.y += 1;
                break;
            case 'left':
                newHead.x -= 1;
                break;
            case 'right':
                newHead.x += 1;
                break;
        }

        if (newHead.x < 0 || newHead.x >= cols || newHead.y < 0 || newHead.y >= rows) {
            return endGame();
        }

        for (let i = 1; i < snake.length; i++) {
            if (newHead.x === snake[i].x && newHead.y === snake[i].y) {
                return endGame();
            }
        }

        snake.unshift(newHead);

        if (newHead.x === food.x && newHead.y === food.y) {
            food = {x: Math.floor(Math.random() * cols), y: Math.floor(Math.random() * rows)};
        } else {
            snake.pop();
        }
    }

    function endGame() {
        // alert('Game over!');
        // location.reload();
    }

    document.addEventListener('keydown', function(event) {
        switch(event.keyCode) {
            case 37: // left arrow
                if (direction!== 'right') {
                    direction = 'left';
                }
                break;
            case 38: // up arrow
                if (direction!== 'down') {
                    direction = 'up';
                }
                break;
            case 39: // right arrow
                if (direction!== 'left') {
                    direction = 'right';
                }
                break;
            case 40: // down arrow
                if (direction!== 'up') {
                    direction = 'down';
                }
                break;
        }
    });

    function gameLoop() {
        draw();
        move();
        requestAnimationFrame(gameLoop);
    }

    gameLoop();
</script>
</body>
</html>